# backend

Water My Plants

# Documentation:

# Base URL for Deployed API

https://water-my-plants-buildweek.herokuapp.com/api

# Endpoints
| Request | URL               | Description |
| ------- | ----------------- | ----------- |
| POST    | /auth/register    | register as a new user |
| POST    | /auth/login       | login as an existing user |
| POST    | /users/:id/plants | adds plant for a specific user (REQUIRES TOKEN) |
| GET     | /auth/plants      | gets an array of all plants for all users |
| GET     | /users/:id        | gets user info for user with given id (REQUIRES TOKEN) |
| GET     | /users/:id/plants | gets an array of plants for specific user (REQUIRES TOKEN) |
| GET     | /plants/:id       | gets info for plant with given id (REQUIRES TOKEN) |
| PUT     | /users/:id        | edits info for user with given id (REQUIRES TOKEN) |
| PUT     | /plants/:id       | edits info for plant with given id (REQUIRES TOKEN) |
| DELETE  | /users/:id        | deletes user with given id (REQUIRES TOKEN) |
| DELETE  | /plants/:id       | deletes plant with given id (REQUIRES TOKEN) |


# Table Requirements

## Users
| Name         | Type    | Required | Unique | Notes |
| ------------ | ------- | -------- | ------ | ----- |
| id           | integer | yes      | yes    | user id (auto generated by API) |
| username     | string  | yes      | yes    | user's username |
| password     | string  | yes      | no     | user's password |
| phone_number | string  | yes      | no     | user's phone number |

## Plants
| Name          | Type    | Required | Unique | Notes |
| ------------- | ------- | -------- | ------ | ----- |
| id            | integer | yes      | yes    | plant id (auto generated by API) |
| nickname      | string  | yes      | no     | plant nickname |
| species       | string  | yes      | no     | plant species |
| h20_frequency | string  | yes      | no     | directions for watering |
| img_url       | string  | no       | no     | URL to image of plant |
| user_id       | integer | yes      | no     | user's id associated with plant - foreign key (will auto populate when new plant is created) |


# Requests and Returns:

### POST /api/auth/register
Request Body:
```json
  {
    "username": "PamelaIsley",
    "password": "strongpassword",
    "phone_number": "1234567890",
  }
```

Returns:
```json
  {
    "new_user": {
      "id": 3,
      "username": "PamelaIsley",
      "phone_number": "1234567890"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0IjozLCJ1c2VybmFtZSI6IlBhbWVsYUlzbGV5IiwicGhvbmVfbnVtYmVyIjoiMTIzNDU2Nzg5MCIsImlhdCI6MTU5Mjg2MjcyMSwiZXhwIjoxNTkzMjk0NzIxfQ.eylFZ0LAtI0C9T65M3b5D1M4v_Krmlb6poEsBwvkVgQ"
  }
```


### POST /api/auth/login
Request Body:
```json
  {
    "username": "PamelaIsley",
    "password": "strongpassword"
  }
```

Returns:
```json
  {
    "welcome": "PamelaIsley",
    "user_id": 3,
    "phone_number": "1234567890",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0IjozLCJ1c2VybmFtZSI6IlBhbWVsYUlzbGV5IiwicGhvbmVfbnVtYmVyIjoiMTIzNDU2Nzg5MCIsImlhdCI6MTU5Mjg2Mjc5NSwiZXhwIjoxNTkzMjk0Nzk1fQ.h21uYWYQcgaDFIkM--SN_hGb5hxNe-jaxjhO_JGzNYA"
  }
```


### POST /users/:id/plants
Request Body:
```json
  {
    "nickname": "Poison Ivy",
    "species": "Toxicodendron radicans",
    "h2o_frequency": "2 times per week",
    "img_url": "",
  }
```

Returns:
```json
  {
    "plant_id": 6,
    "nickname": "Poison Ivy",
    "species": "Toxicodendron radicans",
    "h2o_frequency": "2 times per week",
    "img_url": null,
    "user": "PamelaIsley"
  }
```


### GET /auth/plants
Returns:
```json
  [
    {
      "id": 1,
      "species": "Bambusoideae",
      "h2o_frequency": "3 times per week",
      "img_url": null
    },
    {
      "id": 2,
      "species": "Bellis Perennis",
      "h2o_frequency": "2 times per week",
      "img_url": null
    },
    {
      "id": 3,
      "species": "Helianthus Annuus",
      "h2o_frequency": "1 time per week",
      "img_url": null
    },
    {
      "id": 4,
      "species": "Tulipa",
      "h2o_frequency": "1 time per week",
      "img_url": null
    },
    {
      "id": 5,
      "species": "Lavandula",
      "h2o_frequency": "2 times per week",
      "img_url": null
    },
    {
      "id": 6,
      "species": "Toxicodendron radicans",
      "h2o_frequency": "2 times per week",
      "img_url": null
    }
  ]
```


### GET /users/:id
Returns:
```json
  {
    "id": 3,
    "username": "PamelaIsley",
    "phone_number": "1234567890"
  }
```


### GET /users/:id/plants
Returns:
```json
  [
    {
      "plant_id": 1,
      "nickname": "Bamboo",
      "species": "Bambusoideae",
      "h2o_frequency": "3 times per week",
      "img_url": null,
      "user": "first"
    },
    {
      "plant_id": 2,
      "nickname": "Daisy",
      "species": "Bellis Perennis",
      "h2o_frequency": "2 times per week",
      "img_url": null,
      "user": "first"
    },
    {
      "plant_id": 3,
      "nickname": "Sunflower",
      "species": "Helianthus Annuus",
      "h2o_frequency": "1 time per week",
      "img_url": null,
      "user": "first"
    },
    {
      "plant_id": 4,
      "nickname": "Tulip",
      "species": "Tulipa",
      "h2o_frequency": "1 time per week",
      "img_url": null,
      "user": "first"
    },
    {
      "plant_id": 5,
      "nickname": "Lavender",
      "species": "Lavandula",
      "h2o_frequency": "2 times per week",
      "img_url": null,
      "user": "first"
    }
  ]
```


### GET /plants/:id
Returns:
```json
  {
    "plant_id": 6,
    "nickname": "Poison Ivy",
    "species": "Toxicodendron radicans",
    "h2o_frequency": "2 times per week",
    "img_url": null,
    "user": "PamelaIsley"
  }
```


### PUT /users/:id (Can Update Username, Password and/or Phone Number. For security, Passwords will NEVER be returned to the user)
Request Body:
```json
  {
    "username": "PamelaIsley",
    "password": "newpassword",
    "phone_number": "5555555555"
  }
```

Returns:
```json
  {
    "id": 3,
    "username": "PamelaIsley",
    "phone_number": "5555555555"
  }
```


### PUT /plants/:id
Request Body:
```json
  {
    "nickname": "Super Poisn Ivy",
    "species": "Toxicodendron Radicans",
    "h2o_frequency": "3 Times per Week",
    "img_url": "",
  }
```

Returns:
```json
  {
    "plant_id": 6,
    "nickname": "Super Poisn Ivy",
    "species": "Toxicodendron Radicans",
    "h2o_frequency": "3 Times per Week",
    "img_url": null,
    "user": "PamelaIsley"
  }
```


### DELETE /users/:id
Returns:
```json
  {
    "message": "User with ID 2 has been deleted"
  }
```


### DELETE /plants/:id
Returns:
```json
  {
    "message": "Plant with ID 5 has been deleted"
  }
```